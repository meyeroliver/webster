<!DOCTYPE html>

<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="/styles/app-shell.css">
    <link rel="stylesheet" href="/styles/text.css">
    <link rel="stylesheet" href="/styles/meter.css">
    <link rel="stylesheet" href="/styles/form.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script data-main="config" src="/node_modules/requirejs/require.js"></script>
    <script>
        // loads file in the /js/config.js
        require(['config'], function () {
            //code goes here
            /*  require(['/loaders/load-user-details.js']) */
        });
    </script>
</head>

<body>
    <div class="grid-container">

        <div class="header">HEADER</div>
        <div class="main">
            <h2 class="page-description">Meter Details</h2>

            <div class="meter-card">
                <div>
                    <!-- <input type="image" src="/images/photo_camera-24px.svg" alt="Image not found" class="center"> -->
                    <!-- <input type="image" src="/images/photo_camera-24px.svg" alt="Image not found" class="center"> -->
                    <label for="meter-image">
                        <img src="/images/photo_camera-24px.svg" alt="Image not found" class="captured-image" />
                    </label>
                    <input type="file" id="meter-image" name="meter-image" accept="image/*" capture="camera"
                        style="display: none;">


                    <div id="imagePreview" class="image-preview">
                        <img src="" class="captured-image">
                        <script>
                            const inpFile = document.getElementById("meter-image")
                            const imgContainer = document.getElementById("imagePreview")
                            const capturedImg = imgContainer.querySelector(".captured-image")

                            inpFile.addEventListener("change", function () {
                                const file = this.files[0]
                                if (file) {
                                    const reader = new FileReader();

                                    reader.readAsDataURL(file)

                                    /**
                                     *waits for image to finish loading
                                     */
                                    reader.addEventListener("load", function () {
                                        /**
                                         *This sets the captured image to the element
                                         */
                                        capturedImg.setAttribute("src", this.result)
                                        /**
                                         * TODO
                                         * - convert image to blob and save into index db under the current customer
                                         * - allow for persistence across reloads
                                         */
                                    })
                                }
                                console.log(file)
                            })
                        </script>
                    </div>
                </div>
                <hr>
                <div class="meter-details">
                    <div class="row">
                        <div class="col-6">
                            <label for="meter-type">Select Meter Type:</label>
                        </div>
                        <div class="col-6">
                            <select name="meter-type" id="meter-type">
                                <option value="electricity">ELECTRICITY</option>
                                <option value="water">WATER</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <label for="consumption-type">Select Consumption Type:</label>
                        </div>
                        <div class="col-6">
                            <select name="consumption-type" id="consumption-type">
                                <option value="prepaid">PREPAID</option>
                                <option value="postpaid">POSTPAID</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <label for="serialNo" class="label-form">Serial Number:</label>
                        </div>
                        <div class="col-6">
                            <input type="text" id="serialNo" name="serialNo"
                                class="text-input-form text-input-border-form" data-bind="value:standNo">
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div style="display: inline;">
                        <button>awe</button>
                        <button>awe</button>

                    </div>
                </div>

            </div>

        </div>
        <div class="footer">FOOTER</div>

    </div>
</body>

</html>




<!-- <html>
    <head>
        <link rel="stylesheet" href="style.css">

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div data-bind="visible:page()===4">
            <div class="page-header" style="padding: 0px; margin: 0px">
                <h3 style="text-align: center">Meter Details</h3>
            </div>
            <div class="meter-details">
                <table>
                    <tr>
                        <td></td>
                    </tr>
                    <tr style="height:100px">
                        <td>
                            <input style="width:0px;height:0px;" data-bind="attr:{'id':'cap-image'+$index()},event:{change:function(){$parent.loadImg($index())}}" name="file" type="file"  accept="image/*" capture="camera">
                            <canvas style="width: 100px; height: 100px;border-style: dashed; border-color: #0356a8;"  data-bind="attr:{'id':'canvas'+$index()},click:function(){$parent.takePicture($index());}">
                            </canvas>
                        </td>
                        <td>
                            <table>
                                <tr>
                                    <td><select style="margin-left: 3px;padding-top: 3px; padding-bottom: 3px; margin-top: 3px; margin-bottom: 3px" data-bind="value:meterCategory"><option value="ELECTRICITY">Electricity</option><option value="WATER">Water</option></select></td>
                                    <td style="text-align: right"><select style="margin-left: 3px;padding-top: 3px; padding-bottom: 3px; margin-top: 3px; margin-bottom: 3px" data-bind="value:meterApplication"><option value="PREPAID">Prepaid</option><option value="POSTPAID">Postpaid</option></select></td>
                                </tr>
                                <tr>
                                    <td colspan="2"><input style="margin-left: 3px;padding-top: 3px; padding-bottom: 3px; margin-top: 3px; margin-bottom: 3px;border-style: solid; border-color: #cde6fe;" type="text" data-bind="value:serialNumber" placeholder="Serial Number"></td>
                                </tr>
                                <tr>
                                    <td colspan="2"><input style="margin-left: 3px;padding-top: 3px; padding-bottom: 3px; margin-top: 3px; margin-bottom: 3px;border-style: solid; border-color: #cde6fe;" type="number" data-bind="value:meterReading, visible:meterApplication() === 'POSTPAID'" placeholder="Current Meter Reading"></td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="text-align: right">
                                        <button class="minus-button" data-bind="click:$parent.removeMeter">-</button>
                                    </td>
                                </tr>
                            </table>
                        </td>

                    </tr>
                </table>
                <div style="margin-top: 5px; margin-left: 4px">
                    <button class="add-button" data-bind="click:addMeter">ADD METER</button>
                </div>
            </div>
            <div class="steps">
                <h3>Step 4 of 5</h3>
            </div>
        </div>

    </body>
</html> -->